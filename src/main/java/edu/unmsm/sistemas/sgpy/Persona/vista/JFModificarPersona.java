/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package edu.unmsm.sistemas.sgpy.Persona.vista;

import com.toedter.calendar.JDateChooser;
import java.awt.Image;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.sql.Blob;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import javax.swing.filechooser.FileNameExtensionFilter;
import javax.swing.table.DefaultTableModel;
import edu.unmsm.sistemas.sgpy.Persona.menuPrincipales.OpcionesFrmPersona;

import edu.unmsm.sistemas.sgpy.Persona.modelo.*;
/**
 *
 * @author CARLOS
 */
public class JFModificarPersona extends javax.swing.JFrame {

    /**
     * Creates new form JFMostrarPersona2
     */
    public JFModificarPersona() {
        initComponents();
        inicializarCombos();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        cargarFotoMenu = new javax.swing.JFileChooser();
        jScrollPane1 = new javax.swing.JScrollPane();
        jPanel1 = new javax.swing.JPanel();
        jPanel4 = new javax.swing.JPanel();
        jLabel55 = new javax.swing.JLabel();
        jLabel57 = new javax.swing.JLabel();
        labelLicencia = new javax.swing.JLabel();
        jLabel51 = new javax.swing.JLabel();
        jLabel49 = new javax.swing.JLabel();
        jLabel48 = new javax.swing.JLabel();
        jLabel47 = new javax.swing.JLabel();
        jLabel46 = new javax.swing.JLabel();
        label156116 = new javax.swing.JLabel();
        jLabel42 = new javax.swing.JLabel();
        jLabel53 = new javax.swing.JLabel();
        jLabel50 = new javax.swing.JLabel();
        jLabel56 = new javax.swing.JLabel();
        jLabel21 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        jLabel43 = new javax.swing.JLabel();
        jLabel19 = new javax.swing.JLabel();
        jLabel17 = new javax.swing.JLabel();
        jScrollPane3 = new javax.swing.JScrollPane();
        textAreaDescripcion = new javax.swing.JTextPane();
        jScrollPane4 = new javax.swing.JScrollPane();
        textAreaDescripcion2 = new javax.swing.JTextPane();
        textTipoPersona = new javax.swing.JTextField();
        lblMostrarFoto = new javax.swing.JLabel();
        textDireccion = new javax.swing.JTextField();
        jScrollPane5 = new javax.swing.JScrollPane();
        textAreaHobby = new javax.swing.JTextPane();
        textDepartamento = new javax.swing.JTextField();
        textProvincia = new javax.swing.JTextField();
        textDistrito = new javax.swing.JTextField();
        textDNI = new javax.swing.JTextField();
        textNroCIP = new javax.swing.JTextField();
        textCentroTrabajo = new javax.swing.JTextField();
        textCargo = new javax.swing.JTextField();
        textLicencia = new javax.swing.JTextField();
        jScrollPane6 = new javax.swing.JScrollPane();
        textAreaObservaciones = new javax.swing.JTextPane();
        dateFecNacimiento = new com.toedter.calendar.JDateChooser();
        dateFechaVigente = new com.toedter.calendar.JDateChooser();
        textVigenciaLicencia = new javax.swing.JTextField();
        comboVigenciaLicencia = new javax.swing.JComboBox<>();
        comboDepartamento = new javax.swing.JComboBox<>();
        comboProvincia = new javax.swing.JComboBox<>();
        comboDistrito = new javax.swing.JComboBox<>();
        jButton1 = new javax.swing.JButton();
        comboTipoDePersona = new javax.swing.JComboBox<>();
        btnGuardarCambios = new javax.swing.JButton();
        comboLicenciaConducir = new javax.swing.JComboBox<>();
        jButton2 = new javax.swing.JButton();
        comboCentroTrabajo = new javax.swing.JComboBox<>();
        comboCargo = new javax.swing.JComboBox<>();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel2 = new javax.swing.JPanel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tablaPersona = new javax.swing.JTable();
        btnVisualizarPersona = new javax.swing.JButton();
        label78 = new javax.swing.JLabel();
        textBusqueda = new javax.swing.JTextField();
        radioPorCodigo = new javax.swing.JRadioButton();
        radioPorNombre = new javax.swing.JRadioButton();
        btnBusquedaPersona = new javax.swing.JButton();
        jPanel3 = new javax.swing.JPanel();
        jScrollPane7 = new javax.swing.JScrollPane();
        tablaPersonaTics = new javax.swing.JTable();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

        jPanel1.setPreferredSize(new java.awt.Dimension(1320, 988));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel4.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel55.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel55.setText("Provincia:");
        jPanel4.add(jLabel55, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 508, 70, -1));

        jLabel57.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel57.setText("Observaciones:");
        jPanel4.add(jLabel57, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 788, 100, -1));

        labelLicencia.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        labelLicencia.setText("Licencia Conducir:");
        jPanel4.add(labelLicencia, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 744, 180, -1));

        jLabel51.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel51.setText("Centro de Trabajo:");
        jPanel4.add(jLabel51, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 655, 180, -1));

        jLabel49.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel49.setText("Nro. CIP: ");
        jPanel4.add(jLabel49, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 605, 70, -1));

        jLabel48.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel48.setText("DNI:");
        jPanel4.add(jLabel48, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 605, 40, -1));

        jLabel47.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel47.setText("Departamento: ");
        jPanel4.add(jLabel47, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 455, 110, -1));

        jLabel46.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel46.setText("Fecha CIP Vigente:");
        jPanel4.add(jLabel46, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 655, 120, -1));

        label156116.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        label156116.setText("Cargo:");
        jPanel4.add(label156116, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 700, 50, -1));

        jLabel42.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel42.setText("Vigencia:");
        jPanel4.add(jLabel42, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 748, 60, -1));

        jLabel53.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel53.setText("Fecha de Nacimiento:");
        jPanel4.add(jLabel53, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 410, 140, -1));

        jLabel50.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel50.setText("Distrito:");
        jPanel4.add(jLabel50, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 555, 70, -1));

        jLabel56.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel56.setText("Hobby:");
        jPanel4.add(jLabel56, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 320, 70, -1));

        jLabel21.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel21.setText("Direccion:");
        jPanel4.add(jLabel21, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 270, 80, -1));

        jLabel20.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel20.setText("Tipo Persona:");
        jPanel4.add(jLabel20, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 220, 90, -1));

        jLabel43.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel43.setText("Descripcion Corta:");
        jPanel4.add(jLabel43, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 140, 180, -1));

        jLabel19.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel19.setText("Descripcion:");
        jPanel4.add(jLabel19, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 70, 180, -1));

        jLabel17.setFont(new java.awt.Font("Dialog", 2, 24)); // NOI18N
        jLabel17.setText("Modificar Persona");
        jPanel4.add(jLabel17, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 5, 210, -1));

        jScrollPane3.setViewportView(textAreaDescripcion);

        jPanel4.add(jScrollPane3, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 70, 380, 50));

        jScrollPane4.setViewportView(textAreaDescripcion2);

        jPanel4.add(jScrollPane4, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 140, 380, 60));
        jPanel4.add(textTipoPersona, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 220, 150, 26));
        jPanel4.add(lblMostrarFoto, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 50, 170, 170));
        jPanel4.add(textDireccion, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 270, 320, 26));

        jScrollPane5.setViewportView(textAreaHobby);

        jPanel4.add(jScrollPane5, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 320, 380, 60));
        jPanel4.add(textDepartamento, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 450, 180, 26));
        jPanel4.add(textProvincia, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 500, 180, 26));
        jPanel4.add(textDistrito, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 550, 180, 26));
        jPanel4.add(textDNI, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 600, 180, 26));
        jPanel4.add(textNroCIP, new org.netbeans.lib.awtextra.AbsoluteConstraints(430, 600, 190, 26));
        jPanel4.add(textCentroTrabajo, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 690, 180, 26));
        jPanel4.add(textCargo, new org.netbeans.lib.awtextra.AbsoluteConstraints(410, 693, 140, 26));
        jPanel4.add(textLicencia, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 740, 90, 26));

        jScrollPane6.setViewportView(textAreaObservaciones);

        jPanel4.add(jScrollPane6, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 790, 560, 70));
        jPanel4.add(dateFecNacimiento, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 405, 180, 25));
        jPanel4.add(dateFechaVigente, new org.netbeans.lib.awtextra.AbsoluteConstraints(490, 650, 189, 25));
        jPanel4.add(textVigenciaLicencia, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 743, 110, 26));

        comboVigenciaLicencia.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "No vigente", "Vigente" }));
        comboVigenciaLicencia.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboVigenciaLicenciaActionPerformed(evt);
            }
        });
        jPanel4.add(comboVigenciaLicencia, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 743, 130, -1));

        comboDepartamento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboDepartamentoActionPerformed(evt);
            }
        });
        jPanel4.add(comboDepartamento, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 450, 180, 26));

        comboProvincia.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboProvinciaActionPerformed(evt);
            }
        });
        jPanel4.add(comboProvincia, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 500, 180, 26));

        comboDistrito.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboDistritoActionPerformed(evt);
            }
        });
        jPanel4.add(comboDistrito, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 550, 180, 26));

        jButton1.setFont(new java.awt.Font("Dialog", 0, 14)); // NOI18N
        jButton1.setText("<html><p>Cargar</p><p align=center>Foto</p></html>");
        jButton1.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jPanel4.add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(610, 250, -1, -1));

        comboTipoDePersona.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Natural", "Jurídica" }));
        comboTipoDePersona.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboTipoDePersonaActionPerformed(evt);
            }
        });
        jPanel4.add(comboTipoDePersona, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 220, 190, 26));

        btnGuardarCambios.setFont(new java.awt.Font("Dialog", 0, 14)); // NOI18N
        btnGuardarCambios.setText("<html><p>Guardar</p><p align=center>cambios</p></hmtl>");
        jPanel4.add(btnGuardarCambios, new org.netbeans.lib.awtextra.AbsoluteConstraints(621, 900, -1, -1));

        comboLicenciaConducir.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "No posee", "Posee" }));
        comboLicenciaConducir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboLicenciaConducirActionPerformed(evt);
            }
        });
        jPanel4.add(comboLicenciaConducir, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 740, 100, 26));

        jButton2.setFont(new java.awt.Font("Dialog", 0, 14)); // NOI18N
        jButton2.setText("Volver");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        jPanel4.add(jButton2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 910, -1, -1));

        comboCentroTrabajo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboCentroTrabajoActionPerformed(evt);
            }
        });
        jPanel4.add(comboCentroTrabajo, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 650, 180, -1));

        comboCargo.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Gerente general", "Gerente infraestructura", "Otro" }));
        comboCargo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboCargoActionPerformed(evt);
            }
        });
        jPanel4.add(comboCargo, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 693, 150, 26));

        jPanel1.add(jPanel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(12, 12, 740, 970));

        jTabbedPane1.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 1, true));

        jPanel2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        tablaPersona.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Código", "DNI", "Fecha de nacimiento"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tablaPersona.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tablaPersonaMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(tablaPersona);

        jPanel2.add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 140, 470, 290));

        btnVisualizarPersona.setText("VISUALIZAR");
        btnVisualizarPersona.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnVisualizarPersonaActionPerformed(evt);
            }
        });
        jPanel2.add(btnVisualizarPersona, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 460, -1, -1));

        label78.setFont(new java.awt.Font("Dialog", 0, 14)); // NOI18N
        label78.setText("DNI :");
        jPanel2.add(label78, new org.netbeans.lib.awtextra.AbsoluteConstraints(29, 12, -1, -1));
        jPanel2.add(textBusqueda, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 10, 200, 28));

        radioPorCodigo.setText("Por DNI");
        radioPorCodigo.setOpaque(false);
        radioPorCodigo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                radioPorCodigoActionPerformed(evt);
            }
        });
        jPanel2.add(radioPorCodigo, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 50, -1, -1));

        radioPorNombre.setText("Por descripción");
        radioPorNombre.setOpaque(false);
        radioPorNombre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                radioPorNombreActionPerformed(evt);
            }
        });
        jPanel2.add(radioPorNombre, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 50, -1, -1));

        btnBusquedaPersona.setText("Buscar");
        jPanel2.add(btnBusquedaPersona, new org.netbeans.lib.awtextra.AbsoluteConstraints(260, 90, -1, -1));

        jTabbedPane1.addTab("PERSONA", jPanel2);

        tablaPersonaTics.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "CodTic", "Nombre", "Descripcion"
            }
        ));
        jScrollPane7.setViewportView(tablaPersonaTics);

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(60, 60, 60)
                .addComponent(jScrollPane7, javax.swing.GroupLayout.PREFERRED_SIZE, 400, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(73, Short.MAX_VALUE))
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel3Layout.createSequentialGroup()
                .addGap(67, 67, 67)
                .addComponent(jScrollPane7, javax.swing.GroupLayout.PREFERRED_SIZE, 191, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(283, Short.MAX_VALUE))
        );

        jTabbedPane1.addTab("PERSONA-TICS", jPanel3);

        jPanel1.add(jTabbedPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(780, 20, 540, 570));

        jScrollPane1.setViewportView(jPanel1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 1362, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 600, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents
    public SimpleDateFormat formato = new SimpleDateFormat("dd/MM/YYYY");
    public DefaultTableModel modelo1;
    public DefaultTableModel modelo2;
    public ArrayList<Persona> aux;
    public DepartamentoDAO dep = new DepartamentoDAO();
    public ProvinciaDAO prov = new ProvinciaDAO();
    public DistritoDAO dist = new DistritoDAO();
    public PersonaTicsDAO perTics = new PersonaTicsDAO();
    public PersonaDAO perDAO = new PersonaDAO();
    public TicsDAO tics = new TicsDAO();
    public ArrayList<PersonaTics> listaPersonaTics;
    public ArrayList<Tics> listaTics;
    public int codPersona;
    public Blob foto;
    private void tablaPersonaMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tablaPersonaMouseClicked
        int fila = tablaPersona.rowAtPoint(evt.getPoint());
        ImageIcon promo = new ImageIcon(aux.get(fila).getBytesLeidos());
        ImageIcon icono = new ImageIcon(promo.getImage().getScaledInstance(lblMostrarFoto.getWidth(), lblMostrarFoto.getHeight(), Image.SCALE_DEFAULT));
        lblMostrarFoto.setIcon(icono);
        foto = aux.get(fila).getFoto();
        codPersona = aux.get(fila).getCodPers();
        textTipoPersona.setEditable(true);
        textDepartamento.setEditable(true);
        textProvincia.setEditable(true);
        textDistrito.setEditable(true);
        textVigenciaLicencia.setEditable(true);
        textLicencia.setEditable(true);
        textAreaDescripcion.setText(aux.get(fila).getDesPersona());
        textAreaDescripcion2.setText(aux.get(fila).getDesCorta());
        textAreaHobby.setText(aux.get(fila).getHobby());
        textAreaObservaciones.setText(aux.get(fila).getObservac());
        textCargo.setText(aux.get(fila).getCargo());
        textCentroTrabajo.setText(perDAO.descripcion(aux.get(fila).getCentroTrabajo()));
        textDNI.setText(aux.get(fila).getDNI());
        textDepartamento.setText(dep.busquedaDepartamento(aux.get(fila).getCodDpto()));
        textDireccion.setText(aux.get(fila).getDirecc());
        textDistrito.setText(dist.busquedaDistrito(aux.get(fila).getCodDpto(), aux.get(fila).getCodProv(), aux.get(fila).getCodDist()));
        dateFechaVigente.setDate(aux.get(fila).getFecCIPVig());
        if(aux.get(fila).getLicCond().equals("0")){
            textLicencia.setText("No posee");
            comboLicenciaConducir.setSelectedIndex(0);
            comboVigenciaLicencia.setEnabled(false);
            textVigenciaLicencia.setEnabled(false);
        }
        else{
            textLicencia.setText("Posee");
            comboLicenciaConducir.setSelectedIndex(1);
            comboVigenciaLicencia.setEnabled(true);
        }      
        if(aux.get(fila).getVigente()==null){
            textVigenciaLicencia.setText("");
        }
        else{
            if (aux.get(fila).getVigente().equals("1")) {
                textVigenciaLicencia.setText("Vigente");
            } else {
                textVigenciaLicencia.setText("No vigente");
            }
        }
        dateFecNacimiento.setDate(aux.get(fila).getFecNac());
        textNroCIP.setText(aux.get(fila).getNroCIP());
        textProvincia.setText(prov.busquedaProvincia(aux.get(fila).getCodDpto(), aux.get(fila).getCodProv()));
        if(aux.get(fila).getTipPersona().equals("1")){
            textTipoPersona.setText("Jurídica");
            comboTipoDePersona.setSelectedIndex(1);
            comboTipoDePersona.setEnabled(false);
            comboCentroTrabajo.setEnabled(false);
            comboCargo.setEnabled(false);
            textCentroTrabajo.setEnabled(false);
            textCargo.setEnabled(false);
        }
        else{
            textTipoPersona.setText("Natural");
        } 
        textTipoPersona.setEditable(false);
        textDepartamento.setEditable(false);
        textProvincia.setEditable(false);
        textDistrito.setEditable(false);
        textVigenciaLicencia.setEditable(false);
        textLicencia.setEditable(false);
        listaPersonaTics = perTics.busqueda(aux.get(fila).getCodPers());
        listaTics = tics.listTics();
        if (listaPersonaTics != null) {
            modelo2 = new DefaultTableModel();
            String[] cabecera = {"Código TIC", "Nombre", "Descripción"};
            String[][] datos = new String[listaPersonaTics.size()][3];
            for (int i = 0; i < listaPersonaTics.size(); i++) {
                datos[i][0] = String.valueOf(listaPersonaTics.get(i).getCodTics());
                for (int j = 0; j < listaTics.size(); j++) {
                    if (listaTics.get(j).getCodTics() == listaPersonaTics.get(i).getCodTics()) {
                        datos[i][1] = String.valueOf(listaTics.get(j).getDesTics());
                    }
                }
                datos[i][2] = String.valueOf(listaPersonaTics.get(i).getDesMedio());
            }
            modelo2 = new DefaultTableModel(datos, cabecera);
            tablaPersonaTics.setModel(modelo2);
        }
    }//GEN-LAST:event_tablaPersonaMouseClicked

    private void radioPorCodigoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_radioPorCodigoActionPerformed
        if(radioPorCodigo.isSelected()){
            label78.setText("DNI:");
            radioPorNombre.setSelected(false);
        }
    }//GEN-LAST:event_radioPorCodigoActionPerformed

    private void radioPorNombreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_radioPorNombreActionPerformed
        if(radioPorNombre.isSelected()){
            label78.setText("Descripción:");
            radioPorCodigo.setSelected(false);
        }
    }//GEN-LAST:event_radioPorNombreActionPerformed
    public FileInputStream archivo;
    File archivo2;
    public int longitudBytes;
    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        int resultado;
        FileNameExtensionFilter filtro = new FileNameExtensionFilter("JPG y PNG", "jpg", "png");
        cargarFotoMenu.setFileFilter(filtro);
        resultado = cargarFotoMenu.showOpenDialog(null);
        if (JFileChooser.APPROVE_OPTION == resultado) {
            try {
                archivo2 = cargarFotoMenu.getSelectedFile();
                archivo = new FileInputStream(archivo2);
                this.longitudBytes = (int) (cargarFotoMenu.getSelectedFile().length());
            } catch (FileNotFoundException ex) {
                Logger.getLogger(JFAgregarPersona.class.getName()).log(Level.SEVERE, null, ex);
            }
            archivo2 = cargarFotoMenu.getSelectedFile();
            try {
                ImageIcon icon = new ImageIcon(archivo2.toString());
                Icon icono = new ImageIcon(icon.getImage().getScaledInstance(lblMostrarFoto.getWidth(), lblMostrarFoto.getHeight(), Image.SCALE_DEFAULT));
                lblMostrarFoto.setText(null);
                lblMostrarFoto.setIcon(icono);
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, "Error abriendo la imagen" + ex);
            }
        }
    }//GEN-LAST:event_jButton1ActionPerformed
    public ArrayList<Departamento> listdep;
    public ArrayList<Provincia> listprov;
    public ArrayList<Distrito> listdist; 
    private void comboDepartamentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboDepartamentoActionPerformed
        comboProvincia.removeAllItems();
        textDepartamento.setEditable(true);
        if (comboDepartamento.getSelectedIndex() != -1) {
            textDepartamento.setText(String.valueOf(comboDepartamento.getSelectedItem()));
            for (int i = 0; i < listprov.size(); i++) {
                if (listdep.get(comboDepartamento.getSelectedIndex()).getCodDpto().equals(listprov.get(i).getCodDpto())) {
                    comboProvincia.addItem(listprov.get(i).getDesProv());
                }
            }
            textDepartamento.setEditable(false);
        }
    }//GEN-LAST:event_comboDepartamentoActionPerformed

    private void comboProvinciaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboProvinciaActionPerformed
        comboDistrito.removeAllItems();
        textProvincia.setEditable(true);
        if (comboDepartamento.getSelectedIndex() != -1 && comboProvincia.getSelectedIndex() != -1) {
            textProvincia.setText(String.valueOf(comboProvincia.getSelectedItem()));
            for (int i = 0; i < listdist.size(); i++) {
                if (listdep.get(comboDepartamento.getSelectedIndex()).getCodDpto().equals(listdist.get(i).getCodDpto())
                        && listprov.get(comboProvincia.getSelectedIndex()).getCodProv().equals(listdist.get(i).getCodProv())) {
                    comboDistrito.addItem(listdist.get(i).getDesDist());
                }
            }
            textProvincia.setEditable(false);
        }
    }//GEN-LAST:event_comboProvinciaActionPerformed

    private void comboTipoDePersonaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboTipoDePersonaActionPerformed
        textTipoPersona.setEditable(true);
        if(comboTipoDePersona.getSelectedIndex()==0){
            textTipoPersona.setText("Natural");
        }
        else{
            textTipoPersona.setText("Jurídica");
        }
        textTipoPersona.setEditable(false);
    }//GEN-LAST:event_comboTipoDePersonaActionPerformed

    private void comboDistritoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboDistritoActionPerformed
        if(comboDepartamento.getSelectedIndex() != -1 && comboProvincia.getSelectedIndex() != -1 && comboDistrito.getSelectedIndex()!=-1){
            textDistrito.setEditable(true);
            textDistrito.setText(String.valueOf(comboDistrito.getSelectedItem()));
            textDistrito.setEditable(false);
        }
    }//GEN-LAST:event_comboDistritoActionPerformed

    private void comboVigenciaLicenciaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboVigenciaLicenciaActionPerformed
        textVigenciaLicencia.setEditable(true);
        if(comboVigenciaLicencia.getSelectedIndex() == 0){
            textVigenciaLicencia.setText("No vigente");
        }
        else{
            textVigenciaLicencia.setText("Vigente");
        }
        textVigenciaLicencia.setEditable(false);
    }//GEN-LAST:event_comboVigenciaLicenciaActionPerformed

    private void comboLicenciaConducirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboLicenciaConducirActionPerformed
        textLicencia.setEditable(true);
        if(comboLicenciaConducir.getSelectedIndex() == 0){
            textLicencia.setText("No posee");
            comboVigenciaLicencia.setEnabled(false);
            textVigenciaLicencia.setEnabled(false);
        }
        else{
            textLicencia.setText("Posee");
            comboVigenciaLicencia.setEnabled(true);
            textVigenciaLicencia.setEnabled(true);
        }
        textLicencia.setEditable(false);
    }//GEN-LAST:event_comboLicenciaConducirActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        this.dispose();
        OpcionesFrmPersona frame = new OpcionesFrmPersona();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }//GEN-LAST:event_jButton2ActionPerformed

    private void comboCentroTrabajoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboCentroTrabajoActionPerformed
        if(comboCentroTrabajo.getSelectedIndex()!=-1){
            textCentroTrabajo.setText(String.valueOf(comboCentroTrabajo.getSelectedItem()));
        }
    }//GEN-LAST:event_comboCentroTrabajoActionPerformed

    private void comboCargoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboCargoActionPerformed
        if(comboCargo.getSelectedIndex()==2){
            textCargo.setEditable(true);
        }
        else{
            textCargo.setEditable(false);
        }
    }//GEN-LAST:event_comboCargoActionPerformed

    private void btnVisualizarPersonaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnVisualizarPersonaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_btnVisualizarPersonaActionPerformed
    ArrayList<Persona>personaJuridica = new ArrayList<>();
    public void inicializarCombos(){
        listdep = dep.listDepartamento();
        listprov = prov.listProvincia();
        listdist = dist.listDistrito();
        personaJuridica = perDAO.listPersonaJuridica();
        comboDepartamento.removeAllItems();
        comboProvincia.removeAllItems();
        comboDistrito.removeAllItems();
        comboCentroTrabajo.removeAllItems();
        for (int i = 0; i < listdep.size(); i++) {
            comboDepartamento.addItem(listdep.get(i).getDesDpto());
        }
        for (int i = 0; i < listprov.size(); i++) {
            if (listprov.get(i).getCodDpto().equals("001")) {
                comboProvincia.addItem(listprov.get(i).getDesProv());
            }
        }
        for (int i = 0; i < listdist.size(); i++) {
            if (listdist.get(i).getCodProv().equals("001")) {
                comboDistrito.addItem(listdist.get(i).getDesDist());
            }
        }
        for (int i = 0; i < personaJuridica.size(); i++) {
            comboCentroTrabajo.addItem(personaJuridica.get(i).getDesPersona());
        }
    }
    
    int posProv = -1;

    public String codProvincia() {
        String cod = new String();
        for (int i = 0; i < listprov.size(); i++) {
            if (listdep.get(comboDepartamento.getSelectedIndex()).getCodDpto().equals(listprov.get(i).getCodDpto())
                    && listprov.get(i).getDesProv().equals(String.valueOf(comboProvincia.getSelectedItem()))) {
                cod = listprov.get(i).getCodProv();
                posProv = i;
            }
        }
        return cod;
    }
    public String codDistrito() {
        String cod = new String();
        for (int i = 0; i < listdist.size(); i++) {
            if (listdep.get(comboDepartamento.getSelectedIndex()).getCodDpto().equals(listdist.get(i).getCodDpto())
                    && listprov.get(posProv).getCodProv().equals(listdist.get(i).getCodProv())
                    && listdist.get(i).getDesDist().equals(String.valueOf(comboDistrito.getSelectedItem()))) {
                cod = listdist.get(i).getCodDist();
            }
        }
        return cod;
    }

    public String devolverFecha(JDateChooser date) {
        if (date.getDate() != null) {
            return formato.format(date.getDate());
        } else {
            return null;
        }
    }
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(JFModificarPersona.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(JFModificarPersona.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(JFModificarPersona.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(JFModificarPersona.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new JFModificarPersona().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    public javax.swing.JButton btnBusquedaPersona;
    public javax.swing.JButton btnGuardarCambios;
    public javax.swing.JButton btnVisualizarPersona;
    private javax.swing.JFileChooser cargarFotoMenu;
    public javax.swing.JComboBox<String> comboCargo;
    public javax.swing.JComboBox<String> comboCentroTrabajo;
    public javax.swing.JComboBox<String> comboDepartamento;
    public javax.swing.JComboBox<String> comboDistrito;
    public javax.swing.JComboBox<String> comboLicenciaConducir;
    public javax.swing.JComboBox<String> comboProvincia;
    public javax.swing.JComboBox<String> comboTipoDePersona;
    public javax.swing.JComboBox<String> comboVigenciaLicencia;
    public com.toedter.calendar.JDateChooser dateFecNacimiento;
    public com.toedter.calendar.JDateChooser dateFechaVigente;
    private javax.swing.JButton jButton1;
    public javax.swing.JButton jButton2;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel42;
    private javax.swing.JLabel jLabel43;
    private javax.swing.JLabel jLabel46;
    private javax.swing.JLabel jLabel47;
    private javax.swing.JLabel jLabel48;
    private javax.swing.JLabel jLabel49;
    private javax.swing.JLabel jLabel50;
    private javax.swing.JLabel jLabel51;
    private javax.swing.JLabel jLabel53;
    private javax.swing.JLabel jLabel55;
    private javax.swing.JLabel jLabel56;
    private javax.swing.JLabel jLabel57;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JScrollPane jScrollPane5;
    private javax.swing.JScrollPane jScrollPane6;
    private javax.swing.JScrollPane jScrollPane7;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JLabel label156116;
    private javax.swing.JLabel label78;
    private javax.swing.JLabel labelLicencia;
    public javax.swing.JLabel lblMostrarFoto;
    public javax.swing.JRadioButton radioPorCodigo;
    public javax.swing.JRadioButton radioPorNombre;
    public javax.swing.JTable tablaPersona;
    public javax.swing.JTable tablaPersonaTics;
    public javax.swing.JTextPane textAreaDescripcion;
    public javax.swing.JTextPane textAreaDescripcion2;
    public javax.swing.JTextPane textAreaHobby;
    public javax.swing.JTextPane textAreaObservaciones;
    public javax.swing.JTextField textBusqueda;
    public javax.swing.JTextField textCargo;
    public javax.swing.JTextField textCentroTrabajo;
    public javax.swing.JTextField textDNI;
    public javax.swing.JTextField textDepartamento;
    public javax.swing.JTextField textDireccion;
    public javax.swing.JTextField textDistrito;
    public javax.swing.JTextField textLicencia;
    public javax.swing.JTextField textNroCIP;
    public javax.swing.JTextField textProvincia;
    public javax.swing.JTextField textTipoPersona;
    public javax.swing.JTextField textVigenciaLicencia;
    // End of variables declaration//GEN-END:variables
}
